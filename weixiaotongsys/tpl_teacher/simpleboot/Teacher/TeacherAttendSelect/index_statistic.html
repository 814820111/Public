<teachertpl file="header"/>
<html>
<head>
<style>
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title></title>
<link rel="stylesheet" href="__ROOT__/statics/simpleboot/css/bootstrap_message.css">
<link href="__ROOT__/statics/simpleboot/css/fileinput_message.css" media="all" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="__ROOT__/statics/js/jquery.min.js"></script>
<script type="text/javascript" src="__ROOT__/statics/js/bootstrap.min.js"></script>
<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
<script src="__ROOT__/statics/js/fileinput.js" type="text/javascript"></script>
<script src="__ROOT__/statics/js/fileinput_locale_zh.js" type="text/javascript"></script>
<style type="text/css">
.col-auto { overflow: auto; _zoom: 1;_float: left;}
.col-right { float: right; width: 30%; overflow: hidden; margin-left: 6px; }
.table th, .table td {vertical-align: middle;}
.picList li{margin-bottom: 5px;}
	.touchlei{ background-color:#eeeeee;}
</style>
</head>
<body>
    <ul id="myTab" class="nav-tabs" style=" margin-top:30px; height:30px;">
   		<li ><a href="{:U('index')}" style="color:#1f1f1f;text-decoration:none; padding:10px 15px;" class="touch">老师考勤查询</a></li>
      <li class="active"><a href="{:U('index_statistic')}" style="color:#1f1f1f; text-decoration:none; padding:10px 15px;">老师考勤统计</a></li>
   	</ul>


   	<dir style=" margin-left:30px;">
	   	 <form class="" method="post" action="{:U('TeacherAttendSelect/index_statistic')}" style="margin: 20px 0px 0px">

	   	   教师姓名：
	      <input type="text" name="teacher_name" value="{$teacher_name}"  autocomplete="off"  placeholder="请输入教师姓名..." style=" height: 29px; width: 100px; border-width: 1px; color: black;" >&nbsp;&nbsp;

	     <!--   考勤状态： 
	      <select class="select_2" name="attend_status">
	          <option value='0'></option>
	          <option value='1'>正常</option>
	          <option value='2'>迟到</option>
	      </select> &nbsp;&nbsp; -->

	      工号：
	      <input type="text" name="work_card" value="{$work_card}"  autocomplete="off"  placeholder="请输入教师账号..." style=" height: 29px; border-width: 1px; width: 150px; color: black;">&nbsp;&nbsp;

<!-- 
	      教师介绍： 
	      <input type="text" name="description" style="width: 200px;" value="" placeholder="请输入关键字...">
	      -->
	      
	  		考勤日期：
	        <input type="text" class="sang_Calender" name="start_time" placeholder="-选择时间-" style="width: 150px; height: 29px; border-width: 1px; color: black;" value="{$start_time_unix}">  -  <input type="text" class="sang_Calender" name="end_time" placeholder="-选择时间-" style="width: 150px; height: 29px; border-width: 1px; color: black;" value="{$end_time_unix}"> &nbsp; &nbsp;

	      <input type="submit" style=" background-color: #26a69a; padding: 5px 10px; border-radius: 3px; border: none; color: white;" value="搜索" />

	      <div style="">
	      <input type="hidden" value="1" name="flag_0"/>
	        出勤时段：
	        <if condition="$flag_1 eq 1" >
	         		 <input name="flag_1" type="checkbox" value="1" checked="true" style="    vertical-align: -2px;" />上午上班&nbsp; &nbsp;
	         	<else/>
	         		 <input name="flag_1" type="checkbox" value="1" style="vertical-align: -2px;" />上午上班&nbsp; &nbsp;
	        </if>
	       	<if condition="$flag_2 eq 2" >
	          		<input name="flag_2" type="checkbox" value="2" style="vertical-align: -2px;" checked="true"/>上午下班&nbsp; &nbsp;
	         	<else/>
	         		<input name="flag_2" type="checkbox" value="2" style="vertical-align: -2px;" />上午下班&nbsp; &nbsp;
	        </if>
	        <if condition="$flag_3 eq 3" >
	         		<input name="flag_3" type="checkbox" value="3" style="vertical-align: -2px;" checked="true"/>下午上班&nbsp; &nbsp;
	        	<else/>
	          		<input name="flag_3" type="checkbox" value="3" style="vertical-align: -2px;" />下午上班&nbsp; &nbsp;
	        </if>
	        <if condition="$flag_4 eq 4" >
			        <input name="flag_4" type="checkbox" value="4" style="vertical-align: -2px;" checked="true"/>下午下班&nbsp; &nbsp;
	        	<else/>
	          		<input name="flag_4" type="checkbox" value="4" style="vertical-align: -2px;" />下午下班&nbsp; &nbsp;
	        </if> 
	         <if condition="$flag_5 eq 5" >
			        <input name="flag_5" type="checkbox" value="5" style="vertical-align: -2px;" checked="true"/>晚上上班&nbsp; &nbsp;
	        	<else/>
	          		<input name="flag_5" type="checkbox" value="5" style="vertical-align: -2px;" />晚上上班&nbsp; &nbsp;
	        </if> 
	         <if condition="$flag_6 eq 6" >
			        <input name="flag_6" type="checkbox" value="6" style="vertical-align: -2px;" checked="true"/>晚上下班
	        	<else/>
	          		<input name="flag_6" type="checkbox" value="6" style="vertical-align: -2px;" />晚上下班
	        </if> 
	        </div>
	    </form>

	 <form class="js-ajax-form" action="" method="post" action="{:U('TeacherAttendSelect/index_statistic')}">
      <table class="table table-hover table-bordered table-list">
        <thead>
          <tr>
            <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none;"><input type='checkbox' id='checkAll' name="checkAll">  全选</th>
            <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none;">教师姓名</th>

            <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none;">考勤日期</th>

            <if condition="$flag_1 eq 1" >
           		 <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none;">上午上班</th>
           	</if>
           	<if condition="$flag_2 eq 2" >
	            <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none;">上午下班</th>
            </if>
            <if condition="$flag_3 eq 3" >
            	<th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none;">下午上班</th>
            </if>
            <if condition="$flag_4 eq 4" >
           		 <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none; ">下午下班</th>
            </if>
             <if condition="$flag_5 eq 5" >
           		 <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none; ">晚上上班</th>
            </if>
             <if condition="$flag_6 eq 6" >
           		 <th style=" text-align: center; background-color: #e2e2e2; border-width: 0.5px; border-left: none; border-right: none;">晚上下班</th>
            </if>
          </tr>
        </thead>


        <foreach name="teacher_info" item="vo">
        <tr>
        <!-- TITLE -->
          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none;"><input type="checkbox" class="J_check" id='sel_all' name="ids[]" value="{$vo.phone}" title="Phone:{$vo.phone}"></td>
          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none;">{$vo.name}</td>


          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none;">{$vo.arrivedate}</td>

			<if condition="$flag_1 eq 1" >
		          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none;">  
			          	<if condition="$vo['m_attend'] eq 1"  >
							已打卡
			          	<else/>
							未打卡
			          	</if>
		          </td>
		    </if>

			<if condition="$flag_2 eq 2" >
	          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none;">  
		          	<if condition="$vo['m_lattend'] eq 2"  >
						已打卡
		          	<else/>
						未打卡
		          	</if>
	          </td>
	        </if> 
	        <if condition="$flag_3 eq 3" > 
	          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none;">  
		          	<if condition="$vo['a_attend'] eq 3"  >
						已打卡
		          	<else/>
						未打卡
		          	</if>
	          </td>
	        </if> 
	        <if condition="$flag_4 eq 4" > 
		          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none; border-right: none;">
			         <if condition="$vo['a_lattend'] eq 4"  >
						已打卡
		          	<else/>
						未打卡
		          	</if>
		          </td>
		    </if> 
		     <if condition="$flag_5 eq 5" > 
		          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none; border-right: none;">
			         <if condition="$vo['n_attend'] eq 5"  >
						已打卡
		          	<else/>
						未打卡
		          	</if>
		          </td>
		    </if> 
		     <if condition="$flag_6 eq 6" > 
		          <td style=" text-align: center; background-color: #f5f5f5;border-top: none; border-left: none; border-right: none;">
			         <if condition="$vo['n_lattend'] eq 6"  >
						已打卡
		          	<else/>
						未打卡
		          	</if>
		          </td>
		    </if> 
		</tr>
		</foreach>

      </table>
      <div class="pagination">{$Page}</div>
    </form>

   	</dir>

<!--
把 attr("checked",this.checked); 换成
prop("checked", $(this).prop("checked")); 
可以解决：全选只能执行一次的问题

注意：prop的第二个参数的写法与attr的不同

 -->
<script >
      $(function() {
        $("#checkAll").click(function() {
          $('input[class="J_check"]').prop("checked", $(this).prop("checked")); 
        });
        var $J_check = $("input[class='J_check']");
        $J_check.click(function(){
          $("#checkAll").prop("checked",$J_check.length == $("input[class='J_check']:checked").length ? true : false);
        });
      });
</script>

   	<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
	<script src="js/fileinput.js" type="text/javascript"></script>
	<script src="js/fileinput_locale_zh.js" type="text/javascript"></script>
	<script src="__ROOT__/statics/js/common.js"></script>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
	<script src="js/fileinput.js" type="text/javascript"></script>
	<script src="js/fileinput_locale_zh.js" type="text/javascript"></script>
	<link rel="stylesheet" href="__ROOT__/statics/simpleboot/css/bootstrap_message.css">
	<link href="__ROOT__/statics/simpleboot/css/fileinput_message.css" media="all" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="__ROOT__/statics/js/jquery.min.js"></script>
	<script type="text/javascript" src="__ROOT__/statics/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
	<script src="__ROOT__/statics/js/fileinput.js" type="text/javascript"></script>
	<script src="__ROOT__/statics/js/fileinput_locale_zh.js" type="text/javascript"></script>
	<script src="__ROOT__/statics/js/common.js"></script>
            <script>
            $(".touch").mouseenter(
					function(){
						$(".touch").addClass("touchlei")
						}
			)
			 $(".touch").mouseleave(
					function(){
						$(".touch").removeClass("touchlei")
						}
			)
            </script>

</body>
</html>