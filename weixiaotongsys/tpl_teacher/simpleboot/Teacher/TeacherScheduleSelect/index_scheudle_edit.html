<teachertpl file="header"/>
<html>
<head>
<style>
</style>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title></title>
<link rel="stylesheet" href="__ROOT__/statics/simpleboot/css/bootstrap_message.css">
<link href="__ROOT__/statics/simpleboot/css/fileinput_message.css" media="all" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="__ROOT__/statics/js/jquery.min.js"></script>
<script type="text/javascript" src="__ROOT__/statics/js/bootstrap.min.js"></script>
<script src="__ROOT__/statics/js/layer/layer.js" type="text/javascript"></script>
<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
<script src="__ROOT__/statics/js/fileinput.js" type="text/javascript"></script>
<script src="__ROOT__/statics/js/fileinput_locale_zh.js" type="text/javascript"></script>
<style type="text/css">
.col-auto { overflow: auto; _zoom: 1;_float: left;}
.col-right { float: right; width: 30%; overflow: hidden; margin-left: 6px; }
.table th, .table td {vertical-align: middle;}
.picList li{margin-bottom: 5px;}
</style>
</head>
<foreach>
    <ul id="myTab" class="nav-tabs" style=" margin-top:30px; height:30px;">
		<li class=""><a href="{:U('index_scheudle')}" style="color:#1f1f1f; text-decoration:none; padding:10px 15px;" class="touch">班次管理</a></li>
      <li class="active"><a href="{:U('index_scheudle_add')}" style="color:#1f1f1f; text-decoration:none; padding:10px 15px;" class="touch">修改教师班次</a></li>
   	</ul>
  <div style=" margin-left:30px;margin-right: 30px;">
	 <form class="js-ajax-form"  method="post" action="{:U('TeacherScheduleSelect/index_scheudle_edit_post')}" onsubmit="return checkForm()">
         <input type="hidden" name="scheudle" value="{$schedule['id']}">
		<div style="margin-top: 20px; margin-left: 20px;">
			班次名称:
		 		<input type="text" name="schedule_name" value="{$schedule['name']}"  autocomplete="off"  placeholder="请输入班次名称..." style=" height: 30px; border-width: 1px;">
		</div>
		 <div style="margin-left: 20px;  margin-top: 30px;">设置该班次一天内上下班的次数
			 <label style="margin-left:20px;"><span><input type="radio" name="days_num" style=" width: 0px;" value="1" <php>$check=$schedule['num']==1?"checked":"";</php> {$check}></span><span <php>$aa=$schedule['num']==1?'style="border:1px solid #38adff;padding: 6px;"':"";</php> {$aa}>1天1次上下班</span></label>
			 <label style=""><span><input type="radio" name="days_num" style=" width: 0px;" value="2" <php>$check=$schedule['num']==2?"checked":"";</php> {$check}></span><span <php>$aa=$schedule['num']==2?'style="border:1px solid #38adff;padding: 6px;"':"";</php> {$aa}>1天2次上下班</span></label>
			 <label style=""><span><input type="radio" name="days_num" style=" width: 0px;" value="3" <php>$check=$schedule['num']==3?"checked":"";</php> {$check}></span><span <php>$aa=$schedule['num']==3?'style="border:1px solid #38adff;padding: 6px;"':"";</php> {$aa}>1天3次上下班</span></label>
		 </div>

		<div  class="div_main"   style=" margin-left: 20px;margin-top: 50px; float: left; width: 45%;" >
			<span style="margin-right: 10px;">第&nbsp;1&nbsp;次</span>
			上班：
			<div style="margin-left: 20px;">
			 考勤时间为：
			 	<input type="time" name="ss_time_start" value="{$result[1][0]['ss_time']}" style="width: 100px;height: 30px; border-width: 1px;" />
			  	
			</div>
			<div style="margin-left: 20px;">
			 考勤记录在设置时间点前：
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="ss_time_front" id="ss_time_front" <php>$check = empty($result[1][0]['ss_time_begin'])?30:$result[1][0]['ss_time_begin']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
			  	&nbsp;&nbsp;分钟,后&nbsp;&nbsp;
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="ss_time_back" id="ss_time_back" <php>$check = empty($result[1][0]['ss_time_end'])?30:$result[1][0]['ss_time_end']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
				&nbsp;&nbsp;分钟有效
			</div>
		</div>

		<div class="div_main" style="margin-left: 20px;margin-top: 50px; float: left; width: 45%;">
			下班：
			<div style="margin-left: 20px;">
			 考勤时间为：
			 	<input type="time" name="sx_time_start"  value="{$result[1][1]['ss_time']}"  style="width: 100px;height: 30px; border-width: 1px;" />
			</div>
			<div style="margin-left: 20px;">
			 考勤记录在设置时间点前：
			 	<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="sx_time_front" id="sx_time_front"  <php>$check = empty($result[1][1]['ss_time_begin'])?30:$result[1][1]['ss_time_begin']</php> value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
			  	&nbsp;&nbsp;分钟,后&nbsp;&nbsp;
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="sx_time_back" id="sx_time_back"  <php>$check = empty($result[1][1]['ss_time_end'])?30:$result[1][1]['ss_time_end']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
				&nbsp;&nbsp;分钟有效
			</div>
		</div>
		<div <php>$display=$schedule['num']==2 || $schedule['num']==3?"display:block;":"display:none";</php>  class="div_main" style="margin-left: 20px;margin-top: 50px; float: left; width: 45%; {$display}">
			<span style="margin-right: 10px;">第&nbsp;2&nbsp;次</span>
			上班：
			<div style="margin-left: 20px;">
			 考勤时间为：
			 	<input type="time" name="xs_time_start" value="{$result[2][0]['ss_time']}" style="width: 100px;height: 30px; border-width: 1px;" />
			</div>
			<div style="margin-left: 20px;">
			 考勤记录在设置时间点前：
			 	<td><input type="text"   onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="xs_time_front" id="xs_time_front" <php>$check = empty($result[2][0]['ss_time_begin'])?30:$result[2][0]['ss_time_begin']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
			  	&nbsp;&nbsp;分钟,后&nbsp;&nbsp;
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="xs_time_back" id="xs_time_back" <php>$check = empty($result[2][0]['ss_time_end'])?30:$result[2][0]['ss_time_end']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
				&nbsp;&nbsp;分钟有效
			</div>
		</div>
	<div <php>$display=$schedule['num']==2 || $schedule['num']==3?"display:block;":"display:none";</php>  class="div_main" style="margin-left: 20px;margin-top: 50px; float: left; width: 45%; {$display}">
			下班：
			<div style="margin-left: 20px;">
			 考勤时间为：
			 	<input type="time" name="xx_time_start"   value="{$result[2][1]['ss_time']}"  style="width: 100px;height: 30px; border-width: 1px;" />
			</div>
			<div style="margin-left: 20px;">
			 考勤记录在设置时间点前：
			 	<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="xx_time_front" id="xx_time_front" <php>$check = empty($result[2][1]['ss_time_begin'])?30:$result[2][1]['ss_time_begin']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
			  	&nbsp;&nbsp;分钟,后&nbsp;&nbsp;
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="xx_time_back" id="xx_time_back" <php>$check = empty($result[2][1]['ss_time_end'])?30:$result[2][1]['ss_time_end']</php>  value="{$check}"  style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
				&nbsp;&nbsp;分钟有效
			</div>
		</div>

	<div <php>$display=$schedule['num']==3?"display:block;":"display:none";</php>  class="div_main" style="margin-left: 20px;margin-top: 50px; float: left; width: 45%; {$display}">
			<span style="margin-right: 10px;">第&nbsp;3&nbsp;次</span>
			上班：
			<div style="margin-left: 20px;">
			 考勤时间为：
			 	<input type="time" name="ws_time_start" value="{$result[3][0]['ss_time']}"   style="width: 100px;height: 30px; border-width: 1px;" />
			</div>
			<div style="margin-left: 20px;">
			 考勤记录在设置时间点前：
			 	<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="ws_time_front" id="ws_time_front" <php>$check = empty($result[3][0]['ss_time_begin'])?30:$result[3][0]['ss_time_begin']</php>  value="{$check}"style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
			  	&nbsp;&nbsp;分钟,后&nbsp;&nbsp;
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="ws_time_back" id="ws_time_back" <php>$check = empty($result[3][0]['ss_time_end'])?30:$result[3][0]['ss_time_begin']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
				&nbsp;&nbsp;分钟有效
			</div>
		</div>
	<div <php>$display=$schedule['num']==3?"display:block;":"display:none";</php>  class="div_main" style="margin-left: 20px;margin-top: 50px; float: left; width: 45%; {$display}">
			下班：
			<div style="margin-left: 20px;">
			 考勤时间为：
			 	<input type="time" name="wx_time_start"  value="{$result[3][1]['ss_time']}" style="width: 100px;height: 30px; border-width: 1px;" />
			</div>
			<div style="margin-left: 20px;">
			 考勤记录在设置时间点前：
			 	<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="wx_time_front" id="wx_time_front" <php>$check = empty($result[3][1]['ss_time_begin'])?30:$result[3][1]['ss_time_begin']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
			  	&nbsp;&nbsp;分钟,后&nbsp;&nbsp;
				<td><input type="text"  onkeyup="if(/\D/.test(this.value)){alert('只能输入数字');this.value='';}" name="wx_time_back" id="wx_time_back" <php>$check = empty($result[3][1]['ss_time_end'])?30:$result[3][1]['ss_time_end']</php>  value="{$check}" style="width: 100px;height: 30px; border-width: 1px;" placeholder="请输入:"></td>
				&nbsp;&nbsp;分钟有效
			</div>
		</div>




		 <div  style="clear: both"></div>



		<div class="form-actions" style="margin-bottom: 50px; background-color: white;">
			        <button type="reset" class="btn btn-default" style="border:none;;color:#FFF; background-color:#adadad"> &nbsp;清 &nbsp;空&nbsp; </button>
	 		<button type="submit" class="btn btn-primary btn_submit J_ajax_submit_btn" style="border:none;;color:#FFF; background-color:#26a69a; margin-left:10%;"> &nbsp;保  &nbsp;存&nbsp; </button>

        </div>
	 
    </form>

  </div>


  <script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
	<script src="js/fileinput.js" type="text/javascript"></script>
	<script src="js/fileinput_locale_zh.js" type="text/javascript"></script>
	<script src="__ROOT__/statics/js/common.js"></script>

	<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"> 
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
	<script src="js/fileinput.js" type="text/javascript"></script>
	<script src="js/fileinput_locale_zh.js" type="text/javascript"></script>
	<link rel="stylesheet" href="__ROOT__/statics/simpleboot/css/bootstrap_message.css">
	<link href="__ROOT__/statics/simpleboot/css/fileinput_message.css" media="all" rel="stylesheet" type="text/css" />
	<script type="text/javascript" src="__ROOT__/statics/js/jquery.min.js"></script>
	<script type="text/javascript" src="__ROOT__/statics/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="__ROOT__/statics/js/datetime.js"></script>
	<script src="__ROOT__/statics/js/fileinput.js" type="text/javascript"></script>
	<script src="__ROOT__/statics/js/fileinput_locale_zh.js" type="text/javascript"></script>
	<script src="__ROOT__/statics/js/common.js"></script>
	<script>




        $("input[name='days_num']").click(function(){
          var id  = $(this).val();
          var div_main =$(".div_main");
          var arr = $("input[name='days_num']");
          var time = $("input[type='time']");

            if(id==1)
		  {
             arr.eq(0).parent().next().css("border","1px solid #38adff","padding","5px;")
             arr.eq(1).parent().next().css("border","none");
             arr.eq(2).parent().next().css("border","none");
              time.eq(0).val("07:40");
              time.eq(1).val("16:30");
              div_main.eq(2).hide();
              div_main.eq(3).hide();
              div_main.eq(4).hide();
              div_main.eq(5).hide();
		  }
            if(id==2)
            {
                arr.eq(0).parent().next().css("border","none");
                arr.eq(1).parent().next().css("padding","6px");
                arr.eq(1).parent().next().css("border","1px solid #38adff","padding","5px;")
                arr.eq(2).parent().next().css("border","none");
                time.eq(0).val("07:40");
                time.eq(1).val("11:00");
                time.eq(2).val("13:00");
                time.eq(3).val("16:40");
                div_main.eq(2).show();
                div_main.eq(3).show();
                div_main.eq(4).hide();
                div_main.eq(5).hide();
            }
            if(id==3)
            {
                arr.eq(0).parent().next().css("border","none");
                arr.eq(2).parent().next().css("padding","6px");
                arr.eq(1).parent().next().css("border","none");
                arr.eq(2).parent().next().css("border","1px solid #38adff","padding","5px;")
                time.eq(0).val("07:40");
                time.eq(1).val("11:00");
                time.eq(2).val("13:00");
                time.eq(3).val("16:40");
                time.eq(4).val("18:00");
                time.eq(5).val("20:30");
                div_main.eq(2).show();
                div_main.eq(3).show();
                div_main.eq(4).show();
                div_main.eq(5).show();
            }



		})

        function checkForm()
        {

            var  schedule_name  = $("input[name='schedule_name']").val();


            if(!schedule_name)
            {
                layer.msg('班次名称不能为空', {
                    icon: 2
                    ,shade: 0.01,
                });
                return false;
            }
            var is_time = false;
            $("input[type='time']").each(function(){
                var time_val = $(this).val();
                if(time_val)
                {
                    is_time = true;
                }
            })
            if(!is_time)
            {
                layer.msg('考勤时间不能为空', {
                    icon: 2
                    ,shade: 0.01,
                });
                return false;
            }

            return true;
        }

	</script>

</body>
</html>